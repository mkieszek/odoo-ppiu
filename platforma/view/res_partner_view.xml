<openerp>
<data>
	<record id="view_res_partner" model="ir.ui.view">
		<field name="name">ppiu.partner.form</field>
		<field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form"/>
		<field name="type">form</field>
		<field name="arch" type="xml">
            <xpath expr="/form" position="inside">
				<field name="access_partner" invisible="1" />
	        </xpath>
            <xpath expr="/form/sheet/notebook/page[@string='Sales &amp; Purchases']/group/group/field[@name='customer']" position="after">
	            <field name="partner_recomend" />
	            <field name="partner_sale" />
	        </xpath>
	        <!-- <xpath expr="/form/sheet/notebook/page[@string='Sales &amp; Purchases']/group/group/field[@name='user_id']" position="attributes">
	            <attribute name="domain">[('partner','=',True)]</attribute>
	            <attribute name="context">{}</attribute>
	            <attribue name="invisible">True</attribue>
	        </xpath> -->
	        
            <xpath expr="/form/sheet/div/field[@name='parent_id']" position="attributes">
				<attribute name="attrs">{}</attribute>
	        </xpath>
	        
            <xpath expr="/form/sheet/notebook" position="inside">
            	<page string="Platforma" attrs="{'invisible':[('partner_sale','=',False),'|',('partner_recomend','=',False),('access_partner','=',True)]}">
					<group col="2">
						<group>
							<field name="sum_points" />
							<field name="provision_points" />
						</group>
						<group>
							<field name="provision_ppiu" />
						</group>
					</group>
				</page>
	        </xpath>
        </field>
    </record>
    
	<record id="action_ppiu_customers_form" model="ir.actions.act_window">
        <field name="name">Customers</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">res.partner</field>
        <field name="view_type">form</field>
        <field name="view_mode">kanban,tree,form</field>
        <field name="context">{}</field>
        <field name="domain">[('customer','=',True)]</field>
        <field name="search_view_id" ref="base.view_res_partner_filter"/>
        <field name="help" type="html">
          <p class="oe_view_nocontent_create">
            Click to add a contact in your address book.
          </p><p>
            Odoo helps you easily track all activities related to
            a customer; discussions, history of business opportunities,
            documents, etc.
          </p>
        </field>
    </record>
    
    <record id="view_ppiu_partner_tree" model="ir.ui.view">
        <field name="name">ppiu.res.partner.tree</field>
        <field name="model">res.partner</field>
    	<field name="type">tree</field>
        <field name="field_parent">child_ids</field>
        <field name="arch" type="xml">
            <tree string="Contacts">
                <field name="display_name"/>
                <field name="phone"/>
                <field name="email"/>
                <field name="provision_points"/>
                <field name="parent_id" invisible="1"/>
            </tree>
        </field>
    </record>
       
	<record id="action_ppiu_partner_tree" model="ir.actions.act_window">
	    <field name="name">Partnerzy drzewo</field>
	    <field name="type">ir.actions.act_window</field>
	    <field name="res_model">res.partner</field>
	    <field name="view_type">tree</field>
	    <field name="context">{'default_customer': False,'default_partner': True}</field>
	    <field name="domain">['|',('partner_sale','=',True),('partner_recomend','=',True),('parent_id','=',False)]</field>
	    <field name="view_id" ref="view_ppiu_partner_tree"/>
	</record>
	
	<record id="action_ppiu_partner_list" model="ir.actions.act_window">
	    <field name="name">Partnerzy lista</field>
	    <field name="type">ir.actions.act_window</field>
	    <field name="res_model">res.partner</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,kanban,form</field>
	    <field name="context">{'default_customer': False,'default_partner_recomend': True}</field>
	    <field name="domain">['|',('partner_recomend','=',True),('partner_sale','=',True)]</field>
        <field name="search_view_id" ref="base.view_res_partner_filter"/>
	</record>
	
	<record id="action_ppiu_partner_form" model="ir.actions.act_window">
	    <field name="name">Partnerzy formularz</field>
	    <field name="type">ir.actions.act_window</field>
	    <field name="res_model">res.partner</field>
        <field name="view_type">form</field>
        <field name="view_mode">form</field>
	    <field name="context">{}</field>
	</record>
	
    <record id="view_ppiu_partner_list" model="ir.ui.view">
        <field name="name">ppiu.res.partner.list</field>
        <field name="model">res.partner</field>
        <field name="priority">1</field>
        <field name="arch" type="xml">
            <tree string="Contacts">
                <field name="display_name"/>
                <field name="phone"/>
                <field name="email"/>
                <field name="provision_points"/>
            </tree>
        </field>
    </record>
	
	<record id="ir_partner_open" model="ir.values">
         <field eval="'tree_but_open'" name="key2"/>
         <field eval="'res.partner'" name="model"/>
         <field name="name">Partnerzy</field>
         <field eval="'ir.actions.act_window,%d'%action_ppiu_partner_form" name="value"/>
		 <field name="object" eval="True"/>
     </record>
     
</data>
</openerp>